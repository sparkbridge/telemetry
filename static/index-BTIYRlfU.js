var N=Object.defineProperty;var I=(t,e,a)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var p=(t,e,a)=>I(t,typeof e!="symbol"?e+"":e,a);import{a as S,d as A,o as i,c as l,b as s,n as B,e as y,t as f,F as _,r as v,f as D,g as F,h as O,s as P,i as g,j as V,u as j,p as R,k as x,l as T}from"./.pnpm-8Yn_eWK0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();class c{}p(c,"EditArray",1),p(c,"switch",2),p(c,"Choosing",3),p(c,"text",4),p(c,"number",5);function m(t,e,a){S({method:"post",url:"/api/update_global_config",data:{plugin_id:t,changeK:e,value:a}}).then(function(o){console.log(o.data)}).catch(console.log)}const H=A({data(){return{_switch_tr:this._value,_array_tr:!1}},props:{_target:{},_key:{},_type:{default:c.text},_value:{default:""}},mounted(){const t=this.$refs.btn;this._type==c.switch?t.addEventListener("click",()=>{m(this._target,this._key,this._switch_tr)}):t.addEventListener("change",e=>{m(this._target,this._key,e.target.value)})},methods:{OpenDialog(t){if(t=="save"){let a=[];this.$refs.array_value.forEach(n=>{n.value!=""&&a.push(n.value)}),m(this._target,this._key,a)}const e=this.$refs.dialog;e.style.display==""&&(e.style.display="none"),e.style.display=="none"?(e.style.display="flex",e.showModal()):(e.style.display="none",e.close())},DialogAdd(){this._value.push("")},DialogRemove(t){this._value.splice(t,1)},setSwitch(){this._switch_tr?this._switch_tr=!1:this._switch_tr=!0},GetSwitchClassName(){return this._switch_tr?"switch switch-off":"switch switch-on"},isSwitch(){if(this._type==c.switch)return!0},isChoosing(){if(this._type==c.Choosing)return!0},isArray(){if(this._type==c.EditArray)return!0},isText(){if(this._type==c.text||this._type==c.number)return!0}}}),h=(t,e)=>{const a=t.__vccOpts||t;for(const[o,n]of e)a[o]=n;return a},K={key:0,class:"body"},M={key:1,class:"body"},q=["value"],z={key:2,class:"body"},J=["value"],Q={ref:"dialog",class:"dialog"},U={class:"dialog-body"},X={class:"dialog-body-head"},Y={class:"dialog-body-head-title"},Z={class:"dialog-body-content"},W={class:"dialog-body-content-array"},ee={class:"dialog-body-content-array-input"},te=["value"],se=["onClick"],ne={class:"dialog-body-content-btn"},ae={key:3,class:"body"},oe=["value"],ie=["value"];function re(t,e,a,o,n,r){return i(),l(_,null,[t.isSwitch()?(i(),l("div",K,[s("div",{onClick:e[0]||(e[0]=(...d)=>t.setSwitch&&t.setSwitch(...d)),ref:"btn",class:B(t.GetSwitchClassName())},null,2)])):y("",!0),t.isText()?(i(),l("div",M,[s("input",{type:"text",ref:"btn",value:t._value,class:"input"},null,8,q)])):y("",!0),t.isArray()?(i(),l("div",z,[s("input",{ref:"btn",value:t._value,style:{display:"none"}},null,8,J),s("div",{class:"body-open",onClick:e[1]||(e[1]=d=>t.OpenDialog())},"编辑"),s("dialog",Q,[s("div",U,[s("div",X,[s("div",Y,f(t._key),1)]),s("div",Z,[s("div",W,[(i(!0),l(_,null,v(t._value,(d,u)=>(i(),l("div",ee,[s("input",{value:d,type:"text",ref_for:!0,ref:"array_value"},null,8,te),s("div",{onClick:$=>t.DialogRemove(u)},"删除",8,se)]))),256))]),s("div",ne,[s("div",{onClick:e[2]||(e[2]=(...d)=>t.DialogAdd&&t.DialogAdd(...d))},"添加"),s("div",{onClick:e[3]||(e[3]=d=>t.OpenDialog("save"))},"确定"),s("div",{onClick:e[4]||(e[4]=d=>t.OpenDialog())},"取消")])])])],512)])):y("",!0),t.isChoosing()?(i(),l("div",ae,[s("select",{value:t._value[0],ref:"btn",class:"select"},[(i(!0),l(_,null,v(t._value[1],(d,u)=>(i(),l("option",{value:u},f(d),9,ie))),256))],8,oe)])):y("",!0)],64)}const le=h(H,[["render",re],["__scopeId","data-v-33ede0ef"]]),de={components:{Edit_th_var:le},props:{data_key:{type:String,default:""},data:{type:Object,default:()=>{}}},methods:{GetVar(t){switch(t){case c.Choosing:return"select";case c.switch:return"switch";case c.number:case c.text:return"text";case c.EditArray:return"array"}},GetHeader(){return["配置项","描述","值"]},GetValue(){let t=[];for(const e in this.data){let{type:a,desc:o,value:n,options:r}=this.data[e];r&&(n=[n,r]),t.push([e,o,n,a])}return t}}},ce={id:"val"};function ue(t,e,a,o,n,r){const d=D("Edit_th_var");return i(),l("table",null,[s("h2",null,f(a.data_key),1),s("tr",null,[(i(!0),l(_,null,v(r.GetHeader(),u=>(i(),l("th",null,f(u),1))),256))]),(i(!0),l(_,null,v(r.GetValue(),([u,$,G,L])=>(i(),l("tr",null,[s("td",null,f(u),1),s("td",null,f($),1),s("td",ce,[F(d,{_type:+L,_value:G,_key:u,_target:a.data_key},null,8,["_type","_value","_key","_target"])])]))),256))])}const _e=h(de,[["render",ue],["__scopeId","data-v-7fdf3b46"]]),he={components:{Table:_e},data(){return{data:{}}},mounted(){this.load_axios().then(t=>{this.data=t})},methods:{load_axios(){return new Promise(t=>{S("/api/globa_config",{headers:{"Content-Type":"text/javascript"}}).then(e=>{t(e.data.data)}).catch(e=>{console.log(e)})})}}};function pe(t,e,a,o,n,r){const d=D("Table");return i(!0),l(_,null,v(Object.keys(n.data),u=>(i(),O(d,{data_key:u,data:n.data[u]},null,8,["data_key","data"]))),256)}const b=h(he,[["render",pe]]),fe={};function ve(t,e){return i(),l("h1",null,"全局变量")}const k=h(fe,[["render",ve]]),ye={};function ge(t,e){return i(),l("h1",null,"遥测数据")}const w=h(ye,[["render",ge]]),me={};function be(t,e){return i(),l("h1",null,"逻辑函数")}const C=h(me,[["render",be]]),E=t=>(R("data-v-1c20d9b7"),t=t(),x(),t),$e={class:"header"},ke=E(()=>s("div",{class:"header-logo"},[s("img",{src:"https://sparkbridge.cn/static/spark.jpg",alt:"logo"}),s("span",null,"Sparkbridge2 控制面板")],-1)),we={class:"header-menu"},Ce={class:"body",id:"root"},Se=E(()=>s("div",{class:"end"},[s("div",{class:"end-footer"}," 版权所有 © 2024 Sparkbridge2. 保留所有权利 ")],-1)),Ae=A({__name:"App",setup(t){let e=P(b);return(a,o)=>(i(),l(_,null,[s("div",$e,[ke,s("div",we,[s("div",{class:"header-menu-btn",id:"global_config",onClick:o[0]||(o[0]=n=>g(e)?e.value=b:e=b)},"全局配置"),s("div",{class:"header-menu-btn",id:"logical_functions",onClick:o[1]||(o[1]=n=>g(e)?e.value=C:e=C)},"逻辑函数"),s("div",{class:"header-menu-btn",id:"telemetry_data",onClick:o[2]||(o[2]=n=>g(e)?e.value=w:e=w)},"遥测数据"),s("div",{class:"header-menu-btn",id:"global_var",onClick:o[3]||(o[3]=n=>g(e)?e.value=k:e=k)},"全局变量")])]),s("div",Ce,[(i(),O(V(j(e))))]),Se],64))}}),De=h(Ae,[["__scopeId","data-v-1c20d9b7"]]),Oe=T(De);Oe.mount("#app");
